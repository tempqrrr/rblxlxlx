print("Facer module initialized")

local player = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

local function getBossHRP()
    local Players = game:GetService("Players")
    local entities = workspace:FindFirstChild("Entities")
    if not entities then return nil end

    for _, entity in ipairs(entities:GetChildren()) do
        if not Players:GetPlayerFromCharacter(entity) then
            local hrp = entity:FindFirstChild("HumanoidRootPart")
            if hrp then return hrp end
        end
    end
    return nil
end

local bossExists = false

local function checkBossLoop()
    while true do
        bossExists = getBossHRP() ~= nil
        task.wait(3) -- Check every 3 seconds
    end
end

local function camLockOntoBoss()
    while true do
        if bossExists then
            local bossHRP = getBossHRP()
            if bossHRP then
                local camPos = Camera.CFrame.Position
                local bossPos = bossHRP.Position
                local targetPos = Vector3.new(bossPos.X, camPos.Y, bossPos.Z)
                Camera.CFrame = CFrame.lookAt(camPos, targetPos)
            end
        end
        task.wait(0.1)
    end
end

local function faceBoss()
    local character = player.Character or player.CharacterAdded:Wait()
    local hrp = character:WaitForChild("HumanoidRootPart")

    while true do
        if bossExists then
            local bossHRP = getBossHRP()
            if bossHRP then
                local playerPos = hrp.Position
                local bossPos = bossHRP.Position
                local targetPos = Vector3.new(bossPos.X, playerPos.Y, bossPos.Z)
                hrp.CFrame = CFrame.lookAt(playerPos, targetPos)
            end
        end
        task.wait(0.1)
    end
end

task.spawn(checkBossLoop)
task.spawn(camLockOntoBoss)
task.spawn(faceBoss)
